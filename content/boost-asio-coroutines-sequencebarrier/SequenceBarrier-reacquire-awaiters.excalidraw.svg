<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 980 821.6329684372246" width="980" height="821.6329684372246">
  <!-- svg-source:excalidraw -->
  
  <defs>
    <style class="style-fonts">
      @font-face {
        font-family: "Virgil";
        src: url("https://excalidraw.com/Virgil.woff2");
      }
      @font-face {
        font-family: "Cascadia";
        src: url("https://excalidraw.com/Cascadia.woff2");
      }
    </style>
  </defs>
  <g transform="translate(610 230) rotate(0 108.5 11.5)"><text x="0" y="18" font-family="Helvetica, Segoe UI Emoji" font-size="20px" fill="#e67700" text-anchor="start" style="white-space: pre;" direction="ltr">_lastPublished.store(20)</text></g><g transform="translate(590 330) rotate(0 172 11.5)"><text x="0" y="18" font-family="Helvetica, Segoe UI Emoji" font-size="20px" fill="#e67700" text-anchor="start" style="white-space: pre;" direction="ltr">awaiters = _awaiters.exchange(nullptr)</text></g><g transform="translate(665.4609375 150) rotate(0 41 11.5)"><text x="0" y="18" font-family="Helvetica, Segoe UI Emoji" font-size="20px" fill="#e67700" text-anchor="start" style="white-space: pre;" direction="ltr">Producer</text></g><g transform="translate(270 150) rotate(0 46.5 11.5)"><text x="0" y="18" font-family="Helvetica, Segoe UI Emoji" font-size="20px" fill="#5c940d" text-anchor="start" style="white-space: pre;" direction="ltr">Consumer</text></g><g transform="translate(170 410) rotate(0 142 11.5)"><text x="0" y="18" font-family="Helvetica, Segoe UI Emoji" font-size="20px" fill="#5c940d" text-anchor="start" style="white-space: pre;" direction="ltr">Insert new Awaiter through CAS</text></g><g stroke-linecap="round" transform="translate(730 10) rotate(0 120 40)"><path d="M20 0 M20 0 C73.38 0.3, 127.48 -1.62, 220 0 M20 0 C99.57 -0.58, 177 -1.22, 220 0 M220 0 C235.21 1.69, 240.62 6.28, 240 20 M220 0 C232.69 1.59, 238.15 6.52, 240 20 M240 20 C238.67 33.6, 239.3 43.84, 240 60 M240 20 C240.14 28.99, 239.34 39.94, 240 60 M240 60 C239.93 73.28, 233.06 80.66, 220 80 M240 60 C240.66 71.23, 234.28 79.38, 220 80 M220 80 C166.21 81.62, 114.24 80.99, 20 80 M220 80 C143.74 81.83, 65.57 81.45, 20 80 M20 80 C5.28 78.74, 0.21 73.34, 0 60 M20 80 C6.89 80.17, -0.26 74.08, 0 60 M0 60 C0.63 45.61, 0.08 33.1, 0 20 M0 60 C-0.56 52.06, -0.17 43.56, 0 20 M0 20 C-1.34 5.49, 6.36 0.69, 20 0 M0 20 C1.11 6.02, 7.99 1.72, 20 0" stroke="#000000" stroke-width="1" fill="none"/></g><g transform="translate(750 30) rotate(0 93 22.5)"><text x="0" y="17.5" font-family="Helvetica, Segoe UI Emoji" font-size="20px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">targetSequence = 17</text><text x="0" y="40" font-family="Helvetica, Segoe UI Emoji" font-size="20px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">next = nullptr</text></g><g stroke-linecap="round"><g transform="translate(745.553242981607 329) rotate(0 62.22337850919651 -119.5)"><path d="M-0.79 -0.03 C16.29 -6.28, 82.63 1.5, 103.57 -38.19 C124.51 -77.88, 121.58 -204.8, 124.87 -238.17 M1 -1.09 C18.35 -7.62, 85.27 -0.05, 105.82 -39.88 C126.37 -79.71, 121.47 -206.61, 124.33 -240.07" stroke="#000000" stroke-width="1" fill="none"/></g><g transform="translate(745.553242981607 329) rotate(0 62.22337850919651 -119.5)"><path d="M133.77 -213.08 C131.59 -222.19, 127.88 -236, 125.3 -238.87 M133.74 -211.39 C131.36 -217.48, 128.97 -224.97, 123.52 -240.46" stroke="#000000" stroke-width="1" fill="none"/></g><g transform="translate(745.553242981607 329) rotate(0 62.22337850919651 -119.5)"><path d="M113.25 -213.64 C119.15 -222.39, 123.53 -235.99, 125.3 -238.87 M113.22 -211.95 C115.72 -217.92, 118.21 -225.28, 123.52 -240.46" stroke="#000000" stroke-width="1" fill="none"/></g></g><mask/><g transform="translate(590 430) rotate(0 184 22.5)"><text x="184" y="17.5" font-family="Helvetica, Segoe UI Emoji" font-size="20px" fill="#e67700" text-anchor="middle" style="white-space: pre;" direction="ltr">process awaiters</text><text x="184" y="40" font-family="Helvetica, Segoe UI Emoji" font-size="20px" fill="#e67700" text-anchor="middle" style="white-space: pre;" direction="ltr">(resume Awaiter with targetSequence 17)</text></g><g transform="translate(150 510) rotate(0 167.5 22.5)"><text x="167.5" y="17.5" font-family="Helvetica, Segoe UI Emoji" font-size="20px" fill="#5c940d" text-anchor="middle" style="white-space: pre;" direction="ltr">lastKnowPublished = _lastPublished()</text><text x="167.5" y="40" font-family="Helvetica, Segoe UI Emoji" font-size="20px" fill="#5c940d" text-anchor="middle" style="white-space: pre;" direction="ltr">(20)</text></g><g transform="translate(150 630) rotate(0 172 11.5)"><text x="172" y="18" font-family="Helvetica, Segoe UI Emoji" font-size="20px" fill="#5c940d" text-anchor="middle" style="white-space: pre;" direction="ltr">awaiters = _awaiters.exchange(nullptr)</text></g><g stroke-linecap="round" transform="translate(90 10) rotate(0 120 40)"><path d="M20 0 M20 0 C75.06 1.96, 128.65 1.64, 220 0 M20 0 C100.86 -1.01, 179.82 -2.3, 220 0 M220 0 C232.5 -1.13, 241.94 7.42, 240 20 M220 0 C235.04 -0.87, 239.61 6.01, 240 20 M240 20 C238.97 34.75, 240.78 49.76, 240 60 M240 20 C239.17 28.75, 239.41 37.92, 240 60 M240 60 C240.12 74.8, 234.64 80.01, 220 80 M240 60 C240.78 73.74, 233.37 77.78, 220 80 M220 80 C173.83 79.28, 129.25 80.17, 20 80 M220 80 C148.91 80.74, 77.26 81.52, 20 80 M20 80 C8.09 80.21, 0.1 73.76, 0 60 M20 80 C7.34 81.02, 1.4 73.38, 0 60 M0 60 C1.31 43.54, -0.55 32.69, 0 20 M0 60 C1.15 52.11, 0.07 43.87, 0 20 M0 20 C0.42 5.1, 7.79 0.99, 20 0 M0 20 C1.98 4.7, 6.2 -2.19, 20 0" stroke="#000000" stroke-width="1" fill="none"/></g><g transform="translate(110 30) rotate(0 93 22.5)"><text x="0" y="17.5" font-family="Helvetica, Segoe UI Emoji" font-size="20px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">targetSequence = 19</text><text x="0" y="40" font-family="Helvetica, Segoe UI Emoji" font-size="20px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">next = nullptr</text></g><g stroke-linecap="round"><g transform="translate(310 410) rotate(0 -50 -160)"><path d="M0.09 0.06 C-16.5 -23.08, -83.94 -86.57, -99.15 -139.87 C-114.35 -193.17, -92.5 -289.81, -91.11 -319.74 M-1.32 -0.95 C-18.04 -23.79, -84.56 -85.38, -99.65 -138.27 C-114.73 -191.16, -93.39 -287.71, -91.85 -318.29" stroke="#000000" stroke-width="1" fill="none"/></g><g transform="translate(310 410) rotate(0 -50 -160)"><path d="M-85 -287.64 C-86.91 -298.74, -88.96 -308.04, -90.96 -317.07 M-86.05 -288.35 C-88.28 -298.09, -88.45 -307.65, -92.3 -318.25" stroke="#000000" stroke-width="1" fill="none"/></g><g transform="translate(310 410) rotate(0 -50 -160)"><path d="M-105.37 -290.14 C-100.48 -300.43, -95.71 -308.88, -90.96 -317.07 M-106.42 -290.85 C-102.48 -299.9, -96.5 -308.7, -92.3 -318.25" stroke="#000000" stroke-width="1" fill="none"/></g></g><mask/><g transform="translate(130 730) rotate(0 184 22.5)"><text x="184" y="17.5" font-family="Helvetica, Segoe UI Emoji" font-size="20px" fill="#5c940d" text-anchor="middle" style="white-space: pre;" direction="ltr">process awaiters</text><text x="184" y="40" font-family="Helvetica, Segoe UI Emoji" font-size="20px" fill="#5c940d" text-anchor="middle" style="white-space: pre;" direction="ltr">(resume Awaiter with targetSequence 19)</text></g><g stroke-linecap="round" transform="translate(130 390) rotate(0 190 30)"><path d="M15 0 M15 0 C127.43 -0.86, 237.2 -1.85, 365 0 M15 0 C99.54 -0.41, 183.81 -0.23, 365 0 M365 0 C374.97 -0.85, 378.69 6.39, 380 15 M365 0 C375.79 1.32, 380.95 3.35, 380 15 M380 15 C379.84 26.38, 380.66 38.1, 380 45 M380 15 C379.82 23.35, 379.5 29.3, 380 45 M380 45 C381.93 55.09, 376.21 59.35, 365 60 M380 45 C377.82 57.03, 372.95 60.14, 365 60 M365 60 C279.18 56.74, 193.58 58.96, 15 60 M365 60 C225.91 59.65, 87.74 60.37, 15 60 M15 60 C3.18 61.87, -0.18 53.23, 0 45 M15 60 C5.64 58.48, -0.77 53.94, 0 45 M0 45 C-0.47 33.96, -1.15 26.55, 0 15 M0 45 C-1.04 37.75, 0.5 30.98, 0 15 M0 15 C1.54 5.93, 6.12 -1.19, 15 0 M0 15 C-1.54 7.1, 3.82 1.56, 15 0" stroke="#5c940d" stroke-width="1" fill="none"/></g><g stroke-linecap="round" transform="translate(130 490) rotate(0 190 40)"><path d="M20 0 M20 0 C146.13 -2.25, 272.48 -1.31, 360 0 M20 0 C90.48 0.39, 160.18 0.34, 360 0 M360 0 C374.57 -0.06, 381.78 5.96, 380 20 M360 0 C371.91 2.22, 380.1 8.06, 380 20 M380 20 C377.84 30.82, 378.5 42.1, 380 60 M380 20 C379.28 29.18, 380.82 36.43, 380 60 M380 60 C380.16 72.44, 371.72 81.05, 360 80 M380 60 C380.7 71.24, 375.49 79.79, 360 80 M360 80 C287.63 77.89, 216.47 77.25, 20 80 M360 80 C243.6 78.83, 127.77 78.61, 20 80 M20 80 C8.04 78.02, 0.01 74.44, 0 60 M20 80 C7.79 81.77, 1.07 74.62, 0 60 M0 60 C-0.76 51.73, 0.24 39.68, 0 20 M0 60 C-0.37 44.01, 0.19 28.53, 0 20 M0 20 C-1.13 7.17, 6.13 0.81, 20 0 M0 20 C0.41 5.53, 6.92 0.01, 20 0" stroke="#5c940d" stroke-width="1" fill="none"/></g><g stroke-linecap="round" transform="translate(130 610) rotate(0 190 30)"><path d="M15 0 M15 0 C108.02 -2.63, 199.26 -3.2, 365 0 M15 0 C139.25 0.46, 264.15 0.81, 365 0 M365 0 C374.61 -1.49, 378.15 4.17, 380 15 M365 0 C373.23 0.07, 379.32 3.85, 380 15 M380 15 C378.77 25.24, 380.06 32.73, 380 45 M380 15 C380.91 27.07, 380.17 38.73, 380 45 M380 45 C378.83 54.19, 375.11 58.68, 365 60 M380 45 C381.15 56.26, 373.84 58.87, 365 60 M365 60 C278.22 58.49, 192.33 58.61, 15 60 M365 60 C228.06 62.32, 90.21 61.24, 15 60 M15 60 C5.41 61.41, 1.89 55.32, 0 45 M15 60 C3.39 59.44, 1.42 55.91, 0 45 M0 45 C0.78 33.19, -1.35 21.75, 0 15 M0 45 C-0.14 36.95, -0.15 30.64, 0 15 M0 15 C1.88 5.92, 4.7 1.32, 15 0 M0 15 C0.41 3.68, 5.35 1.11, 15 0" stroke="#5c940d" stroke-width="1" fill="none"/></g><g stroke-linecap="round" transform="translate(110 710) rotate(0 200 40)"><path d="M20 0 M20 0 C97.45 2.14, 175.38 3.14, 380 0 M20 0 C141.15 -0.8, 262.29 -0.28, 380 0 M380 0 C394.74 -1.66, 401.87 8.61, 400 20 M380 0 C392.74 0.88, 399.24 8.97, 400 20 M400 20 C401.09 28.7, 399.84 35.74, 400 60 M400 20 C400.1 29.36, 400.19 37.87, 400 60 M400 60 C398.58 73.51, 393.22 79.43, 380 80 M400 60 C401.1 73.05, 393.37 78.02, 380 80 M380 80 C302.79 79.06, 223.11 79.43, 20 80 M380 80 C307.87 81.05, 235.66 80.68, 20 80 M20 80 C5.87 78.03, -0.26 72.15, 0 60 M20 80 C6.05 78.56, 0.23 75.03, 0 60 M0 60 C1.42 48.84, -0.67 35.03, 0 20 M0 60 C-0.51 45.55, 0.16 30.78, 0 20 M0 20 C-0.22 4.84, 5.48 1.86, 20 0 M0 20 C-2.24 5.74, 5.92 -1.27, 20 0" stroke="#5c940d" stroke-width="1" fill="none"/></g><g stroke-linecap="round"><g transform="translate(310 450) rotate(0 0 20)"><path d="M-0.92 0.25 C-0.78 7.3, 0 34.41, 0.19 41.1 M0.8 -0.67 C0.86 6.18, -0.46 33.07, -0.66 39.56" stroke="#5c940d" stroke-width="1" fill="none"/></g><g transform="translate(310 450) rotate(0 0 20)"><path d="M-6.32 20.82 C-3.59 25.62, -3.27 29.11, -2.62 39.3 M-6.63 21.24 C-5.28 25.92, -4.12 30.59, -0.16 39.38" stroke="#5c940d" stroke-width="1" fill="none"/></g><g transform="translate(310 450) rotate(0 0 20)"><path d="M7.35 21.37 C6.72 25.93, 3.69 29.29, -2.62 39.3 M7.04 21.79 C5.1 26.26, 2.97 30.79, -0.16 39.38" stroke="#5c940d" stroke-width="1" fill="none"/></g></g><mask/><g stroke-linecap="round"><g transform="translate(310 570) rotate(0 0 20)"><path d="M-0.32 1.05 C-0.22 7.52, 0.61 33.18, 0.59 39.79 M1.72 0.55 C1.7 7.12, 0.47 34.85, -0.05 41.21" stroke="#5c940d" stroke-width="1" fill="none"/></g><g transform="translate(310 570) rotate(0 0 20)"><path d="M-4.03 23.03 C-4.24 27.19, -0.96 34.91, -0.6 40.69 M-5.89 21.14 C-4.62 28.59, -3.33 32.84, -0.37 40.66" stroke="#5c940d" stroke-width="1" fill="none"/></g><g transform="translate(310 570) rotate(0 0 20)"><path d="M9.62 23.84 C5.27 27.71, 4.4 35.19, -0.6 40.69 M7.77 21.94 C5.05 29.09, 2.36 33.11, -0.37 40.66" stroke="#5c940d" stroke-width="1" fill="none"/></g></g><mask/><g stroke-linecap="round"><g transform="translate(310 670) rotate(0 0 20)"><path d="M-1.17 -0.48 C-1.11 5.89, -0.6 32.76, -0.39 39.34 M0.42 -1.78 C0.35 5.25, -1.37 33.6, -1.54 40.53" stroke="#5c940d" stroke-width="1" fill="none"/></g><g transform="translate(310 670) rotate(0 0 20)"><path d="M-8.34 20.8 C-7.02 26.27, -6.15 32.24, -2.97 38.55 M-7.76 20.96 C-5.84 27.97, -3.56 35.59, -1.09 41.34" stroke="#5c940d" stroke-width="1" fill="none"/></g><g transform="translate(310 670) rotate(0 0 20)"><path d="M5.33 21.41 C3.35 26.6, 0.94 32.42, -2.97 38.55 M5.9 21.57 C2.71 28.41, -0.11 35.8, -1.09 41.34" stroke="#5c940d" stroke-width="1" fill="none"/></g></g><mask/><g stroke-linecap="round" transform="translate(590 210) rotate(0 130 30)"><path d="M15 0 M15 0 C74.12 -0.53, 136.98 -0.71, 245 0 M15 0 C82.02 1.8, 149.33 1.13, 245 0 M245 0 C255.63 0.75, 259.02 3.35, 260 15 M245 0 C256.82 -1.31, 259.12 3.76, 260 15 M260 15 C260.9 26.51, 259.36 34.9, 260 45 M260 15 C261.13 21.54, 259.83 28.78, 260 45 M260 45 C260.15 54.83, 255.14 61.6, 245 60 M260 45 C259.36 55.8, 256.64 61.61, 245 60 M245 60 C172.75 58.54, 97.45 60.42, 15 60 M245 60 C173.5 58.49, 100.91 57.84, 15 60 M15 60 C3.72 58.54, 0.64 54.46, 0 45 M15 60 C5.28 61.06, 2.06 56.62, 0 45 M0 45 C0.66 36.46, -1.29 27.81, 0 15 M0 45 C-0.42 38.34, -0.51 31.27, 0 15 M0 15 C-1.9 5.25, 4.93 -1.01, 15 0 M0 15 C-0.15 5.54, 6.74 2.22, 15 0" stroke="#e67700" stroke-width="1" fill="none"/></g><g stroke-linecap="round" transform="translate(570 310) rotate(0 190 30)"><path d="M15 0 M15 0 C116.73 -1.37, 220.12 -0.91, 365 0 M15 0 C127.44 0.15, 238.71 0.87, 365 0 M365 0 C375.24 -0.42, 378.38 5.54, 380 15 M365 0 C375.21 -1.67, 378.45 3.53, 380 15 M380 15 C380.34 22.72, 381.89 30.02, 380 45 M380 15 C380.2 23.81, 379.22 32.56, 380 45 M380 45 C378.52 53.11, 376.53 58.6, 365 60 M380 45 C380.28 53.18, 374.61 57.82, 365 60 M365 60 C255.61 59.15, 147.38 60.1, 15 60 M365 60 C260 59.99, 153.68 60.25, 15 60 M15 60 C3.81 59.21, 0.05 56.84, 0 45 M15 60 C7.24 59.61, 0.09 53.87, 0 45 M0 45 C0.86 38.48, 1.35 30.5, 0 15 M0 45 C0.52 33.46, -0.23 23.81, 0 15 M0 15 C1.44 4.15, 4.33 -0.34, 15 0 M0 15 C2.23 6.79, 4.97 1.7, 15 0" stroke="#e67700" stroke-width="1" fill="none"/></g><g stroke-linecap="round" transform="translate(570 410) rotate(0 200 40)"><path d="M20 0 M20 0 C145.97 1.25, 269.94 0.3, 380 0 M20 0 C124.91 0.86, 230.86 1.46, 380 0 M380 0 C393.31 1.47, 400.98 5.09, 400 20 M380 0 C391.5 1.98, 398.47 7.76, 400 20 M400 20 C400.77 27.91, 398.84 38.65, 400 60 M400 20 C400.53 27.63, 400.6 35.14, 400 60 M400 60 C401.55 72.42, 394.91 79.25, 380 80 M400 60 C401.78 74.73, 394.05 81.39, 380 80 M380 80 C278.32 77.24, 175.7 78.22, 20 80 M380 80 C252.76 81.47, 125.32 81.04, 20 80 M20 80 C6.48 79.36, -0.27 74.09, 0 60 M20 80 C6.96 80.8, -0.12 73.89, 0 60 M0 60 C-0.8 48.82, 2.2 34.82, 0 20 M0 60 C1.33 49.07, 0.95 38.09, 0 20 M0 20 C-0.72 4.71, 6.4 1.03, 20 0 M0 20 C0.96 8.29, 7.79 -2.28, 20 0" stroke="#e67700" stroke-width="1" fill="none"/></g><g stroke-linecap="round"><g transform="translate(710 270) rotate(0 0 20)"><path d="M-1.07 1.13 C-1.08 7.74, -0.97 33.91, -0.85 40.24 M0.57 0.68 C1.01 6.85, 1.72 31.7, 1.42 38.24" stroke="#e67700" stroke-width="1" fill="none"/></g><g transform="translate(710 270) rotate(0 0 20)"><path d="M-3.48 18.01 C-3.29 23.35, -3.64 30.06, -0.55 38.95 M-4.9 18.46 C-2.14 25.58, 0.25 32.25, 2.19 38.85" stroke="#e67700" stroke-width="1" fill="none"/></g><g transform="translate(710 270) rotate(0 0 20)"><path d="M10.21 18.06 C7.2 23.27, 3.65 29.96, -0.55 38.95 M8.78 18.5 C6.75 25.55, 4.36 32.2, 2.19 38.85" stroke="#e67700" stroke-width="1" fill="none"/></g></g><mask/><g stroke-linecap="round"><g transform="translate(130 370) rotate(0 400 10)"><path d="M0.55 -1.16 C60.63 -1.17, 284.2 -4, 360.93 -0.55 C437.66 2.9, 387.62 16, 460.95 19.55 C534.28 23.1, 744.36 20.54, 800.93 20.73" stroke="#364fc7" stroke-width="1.5" fill="none" stroke-dasharray="1.5 7"/></g></g><mask/><g stroke-linecap="round"><g transform="translate(30 170) rotate(0 0 320)"><path d="M-0.12 -1.08 C-0.2 105.56, 0.54 533.36, 0.6 640.06 M-1.65 0.97 C-1.93 107.8, -0.23 535.12, -0.03 641.63" stroke="#000000" stroke-width="1" fill="none"/></g><g transform="translate(30 170) rotate(0 0 320)"><path d="M-12.17 614.48 C-6.17 624.88, -3.65 636.28, -1.51 642.53 M-10.68 613.55 C-6.18 622.2, -3.25 631.41, 0.16 641.74" stroke="#000000" stroke-width="1" fill="none"/></g><g transform="translate(30 170) rotate(0 0 320)"><path d="M8.36 614.42 C6.34 624.82, 0.85 636.25, -1.51 642.53 M9.84 613.49 C7.92 622.22, 4.44 631.45, 0.16 641.74" stroke="#000000" stroke-width="1" fill="none"/></g></g><mask/><g transform="translate(10 130) rotate(0 22.5 11.5)"><text x="22.5" y="18" font-family="Helvetica, Segoe UI Emoji" font-size="20px" fill="#000000" text-anchor="middle" style="white-space: pre;" direction="ltr">Time</text></g><g stroke-linecap="round"><g transform="translate(730 370) rotate(0 0 20)"><path d="M-0.84 -0.09 C-0.87 6.57, -0.99 33.59, -0.89 40.1 M0.91 -1.18 C1.32 5.68, 1.7 34.87, 1.35 41.68" stroke="#e67700" stroke-width="1" fill="none"/></g><g transform="translate(730 370) rotate(0 0 20)"><path d="M-5.41 21.31 C-3.5 26.92, -3.86 29.94, 0.31 40.43 M-5.17 23.76 C-2.38 27.9, -1.52 32.82, 1.21 41.15" stroke="#e67700" stroke-width="1" fill="none"/></g><g transform="translate(730 370) rotate(0 0 20)"><path d="M8.27 21.49 C6.9 26.95, 3.26 29.94, 0.31 40.43 M8.51 23.94 C7.74 28.12, 5.04 33, 1.21 41.15" stroke="#e67700" stroke-width="1" fill="none"/></g></g><mask/></svg>